<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>templete</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- Site CSS -->
<link href="style/disease_main.css?v1" rel="stylesheet">
<!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!--[if lt IE 9]>
 <script src="js/html5shiv.min.js?v=f3008b4099"></script>
 <script src="js/respond.min.js?v=f3008b4099"></script>
<![endif]-->
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript" src="js/doctor-utils.js"></script>
</head>

<body>
<!--START: Wrapper -->
<div id="wrapper"> 
 <!--START: content -->
 <div id="content">
  <div class="assessment-questionnaire">
  	<p class="aq-tips">请认真填写以下健康信息(第一题为多选，其余选择题为单选)：</p>
   <h3 id="question1">1、已患疾病（多选）</h3>
   <p id="question1_error" style="display:none" class="no-empty">* 此项为必填项</p>
   <ul class="quextionnaire-lists">
   	<li><label><input type="checkbox" name="checkboxGroup0" value="A" ><i class="ico-radio"></i> 高血压</label></li>
    <li><label><input type="checkbox" name="checkboxGroup0" value="B"><i class="ico-radio"></i> 糖尿病</label></li>
    <li><label><input type="checkbox" name="checkboxGroup0" value="C"><i class="ico-radio"></i> 冠心病</label></li>
    <li><label><input type="checkbox" name="checkboxGroup0" value="D"><i class="ico-radio"></i> 脑卒中</label></li>
    <li><label><input type="checkbox" name="checkboxGroup0" value="E" id="checkboxGroup0_5"><i class="ico-radio"></i> 无</label></li>
   </ul>
   <h3 id="question2">2、您是否吸烟 </h3>
   <p id="question2_error" style="display:none" class="no-empty">* 此项为必填项</p>
   <ul class="quextionnaire-lists">
       <li><label><input type="radio" name="RadioGroup0" value="0" id="RadioGroup0_0"><i class="ico-radio"></i>是</label></li>
       <li><label><input type="radio" name="RadioGroup0" value="1" id="RadioGroup0_1"><i class="ico-radio"></i>否</label></li>
   </ul>
   <h3 id="question3">3、收缩压（高压）____（mmHg）</h3>
   <p id="question3_error" style="display:none" class="no-empty">* 此项为必填项</p>
   <ul class="quextionnaire-lists">
    <li><label><input type="radio" name="RadioGroup1" value="110" id="RadioGroup1_0"><i class="ico-radio"></i> &lt;120</label></li>
    <li><label><input type="radio" name="RadioGroup1" value="125" id="RadioGroup1_1"><i class="ico-radio"></i> 120~129</label></li>
    <li><label><input type="radio" name="RadioGroup1" value="135" id="RadioGroup1_2"><i class="ico-radio"></i> 130~139</label></li>
    <li><label><input type="radio" name="RadioGroup1" value="150" id="RadioGroup1_3"><i class="ico-radio"></i> 140~159</label></li>
    <li><label><input type="radio" name="RadioGroup1" value="170" id="RadioGroup1_4"><i class="ico-radio"></i> 160~179</label></li>
    <li><label><input type="radio" name="RadioGroup1" value="190" id="RadioGroup1_5"><i class="ico-radio"></i> ≥180</label></li>
    <li><label><input type="radio" name="RadioGroup1" value="0" id="RadioGroup1_6"><i class="ico-radio"></i> 未测量</label></li>
   </ul>
   <h3 id="question4">4、舒张压（低压）____（mmHg）</h3>
   <p id="question4_error" style="display:none" class="no-empty">* 此项为必填项</p>
   <ul class="quextionnaire-lists">
       <li><label><input type="radio" name="RadioGroup2" value="70" id="RadioGroup2_0"><i class="ico-radio"></i> &lt;80</label></li>
       <li><label><input type="radio" name="RadioGroup2" value="85" id="RadioGroup2_1"><i class="ico-radio"></i> 80~89</label></li>
       <li><label><input type="radio" name="RadioGroup2" value="92" id="RadioGroup2_2"><i class="ico-radio"></i> 90~94</label></li>
       <li><label><input type="radio" name="RadioGroup2" value="100" id="RadioGroup2_3"><i class="ico-radio"></i> 95~109</label></li>
       <li><label><input type="radio" name="RadioGroup2" value="120" id="RadioGroup2_4"><i class="ico-radio"></i> ≥110</label></li>
       <li><label><input type="radio" name="RadioGroup2" value="0" id="RadioGroup2_5"><i class="ico-radio"></i> 未测量</label></li>
   </ul>
   <h3 id="question5">5、总胆固醇（mmol/L）____正常值（胆固醇高容易导致动脉硬化或冠心病）</h3>
   <p id="question5_error" style="display:none" class="no-empty">* 此项为必填项</p>
   <ul class="quextionnaire-lists">
       <li><label><input type="radio" name="RadioGroup3" value="5" id="RadioGroup3_0"><i class="ico-radio"></i> &lt;5.18</label></li>
       <li><label><input type="radio" name="RadioGroup3" value="5.7" id="RadioGroup3_1"><i class="ico-radio"></i> 5.18~6.22</label></li>
       <li><label><input type="radio" name="RadioGroup3" value="6.5" id="RadioGroup3_2"><i class="ico-radio"></i> ≥6.22</label></li>
       <li><label><input type="radio" name="RadioGroup3" value="0" id="RadioGroup3_3"><i class="ico-radio"></i> 未测量</label></li>
   </ul>
    <a class="btn btn-primary btn-block" onclick="doEvaluation();">提交测试</a>
  </div>
 </div>
</div>
<!--END: content --> 
<!--START: Footer -->
<div id="footer"> </div>
<!--END: Footer -->
</div>
<!--END: Wrapper -->
<script>
$(document).ready(function(){
    
    $("[name='checkboxGroup0']").click(function (){
        if (($(this).attr('id') == "checkboxGroup0_5") && ($(this).attr("checked"))) {
            $("[name='checkboxGroup0']").removeAttr("checked");
            $("#checkboxGroup0_5").attr("checked",'true');
        } else if ($(this).attr("checked")) {
            $("#checkboxGroup0_5").removeAttr("checked");
        }
    })
})

function validateError(){
    var checkbox_selcection_list = new Array(4);
    var index = 0;
    $('input:checkbox[name="checkboxGroup0"][checked]').each(function(){
        checkbox_selcection_list[index]=$(this).val();
        index += 1;
    })
    if (index == 0) {
        document.getElementById('question1').scrollIntoView();
        $('#question1_error').show();
        return ['true', '', ''];
    } else {
        checkbox_selcection_list.splice(index, 4-index);
    }
                                                             
    var radio_selection_list = new Array(4);

    var val = "";
    val=$('input:radio[name="RadioGroup0"]:checked').val();
    if(val==null){
        document.getElementById('question2').scrollIntoView();
        $('#question2_error').show();
        return ['true','','']
    }
    else{
        radio_selection_list[0] = val;
    }
    
    val=$('input:radio[name="RadioGroup1"]:checked').val();
    if(val==null){
        document.getElementById('question3').scrollIntoView();
        $('#question3_error').show();
        return ['true','','']
    }
    else{
        radio_selection_list[1] = val;
    }
    
    val=$('input:radio[name="RadioGroup2"]:checked').val();
    if(val==null){
        document.getElementById('question4').scrollIntoView();
        $('#question4_error').show();
        return ['true','','']
    }
    else{
        radio_selection_list[2] = val;
    }
    
    val=$('input:radio[name="RadioGroup3"]:checked').val();
    if(val==null){
        document.getElementById('question5').scrollIntoView();
        $('#question5_error').show();
        return ['true','','']
    }
    else{
        radio_selection_list[3] = val;
    }
    
    return ['false',checkbox_selcection_list,radio_selection_list];
}

function doEvaluation(){
    $('.no-empty').each(function (){
        $(this).hide();
    });
    var result = validateError();
    if (result[0] == 'true') {
        return false;
    } else {
    	window.jsInterface.invokeMethod(result[1], result[2]);
    }
}

function getHomeSuccess(json_data){
    alert(json_data);
}
</script>
</body>
</html>
